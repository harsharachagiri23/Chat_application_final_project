{"ast":null,"code":"var _jsxFileName = \"/Users/harshavardhani/Documents/web_dev_tools/student-bos6250-harshaV0211/final/client/src/App.jsx\",\n    _s = $RefreshSig$();\n\nimport \"./App.css\";\nimport io from \"socket.io-client\";\nimport { useState } from \"react\";\nimport Chat from \"./Chat\";\nimport msg from './icons/ChatApp.jpg';\nimport LoginForm from \"./LoginForm\";\nimport { LOGIN_STATUS } from './constants';\nimport { fetchSession, fetchLogin, fetchLogout, fetchActiveUsers } from './services';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst socket = io.connect(\"http://localhost:3001\");\n\nfunction App() {\n  _s();\n\n  const [username, setUsername] = useState(\"\");\n  const [room, setRoom] = useState(\"\");\n  const [showChat, setShowChat] = useState(false);\n  const [loginStatus, setLoginStatus] = useState(LOGIN_STATUS.NOT_LOGGED_IN); // one variable covers multiple cases\n\n  const [activeUsers, setActiveUsers] = useState({});\n  const [error, setError] = useState('');\n  const data = {\n    name: username,\n    userId: socket.id\n  };\n  socket.emit('setSocketId', data);\n\n  const joinRoom = () => {\n    if (username !== \"\" && room !== \"\") {\n      socket.emit(\"join_room\", room);\n      setShowChat(true);\n      getActiveUsers(room);\n    }\n  };\n\n  function onLogin(username) {\n    console.log(\"*** Clicked on login for username : \", username);\n    fetchLogin(username).then(fetchedTodos => {\n      console.log(\"fetched TOds : \", fetchedTodos);\n      setError(''); // in case another action had set an error\n\n      setUsername(username);\n      setLoginStatus(LOGIN_STATUS.IS_LOGGED_IN);\n    }).catch(err => {\n      setError((err === null || err === void 0 ? void 0 : err.error) || 'ERROR');\n    });\n  }\n\n  function onLogout() {\n    setError('');\n    setUsername('');\n    setLoginStatus(LOGIN_STATUS.NOT_LOGGED_IN);\n    fetchLogout() // We don't really care about results\n    .catch(err => {\n      setError((err === null || err === void 0 ? void 0 : err.error) || 'ERROR'); // Ensure that the error ends up truthy\n    });\n  }\n\n  function getActiveUsers(room) {\n    console.log(\"*** Inside get Active Users : \");\n    fetchActiveUsers(room).then(userData => {\n      console.log(\"Data from fetchActive Users  : \", userData);\n      setActiveUsers(userData);\n    });\n  }\n\n  console.log(\"Login status : \", loginStatus);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"App\",\n    children: [loginStatus === LOGIN_STATUS.NOT_LOGGED_IN && /*#__PURE__*/_jsxDEV(LoginForm, {\n      onLogin: onLogin\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 55\n    }, this), loginStatus === LOGIN_STATUS.IS_LOGGED_IN && /*#__PURE__*/_jsxDEV(\"div\", {\n      children: !showChat ? /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"joinChatContainer\",\n        children: [/*#__PURE__*/_jsxDEV(\"img\", {\n          className: \"Chatlogo\",\n          src: msg,\n          alt: \" msg \",\n          height: 200,\n          width: 200\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 86,\n          columnNumber: 16\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          className: \"btn-submit\",\n          type: \"text\",\n          placeholder: \"Enter your nickname...\",\n          onChange: event => {\n            setUsername(event.target.value);\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 87,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          className: \"btn-submit\",\n          type: \"text\",\n          placeholder: \"#channels\",\n          onChange: event => {\n            setRoom(event.target.value);\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 95,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"btn-login\",\n          onClick: joinRoom,\n          children: \"Join Channel\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 103,\n          columnNumber: 15\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 85,\n        columnNumber: 13\n      }, this) : /*#__PURE__*/_jsxDEV(Chat, {\n        socket: socket,\n        username: username,\n        room: room,\n        onLogout: onLogout,\n        activeUsers: activeUsers\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 106,\n        columnNumber: 13\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 80,\n    columnNumber: 5\n  }, this);\n}\n\n_s(App, \"DitUwomKqeUEDo1i5qKvqpva8HM=\");\n\n_c = App;\nexport default App;\n\nvar _c;\n\n$RefreshReg$(_c, \"App\");","map":{"version":3,"names":["io","useState","Chat","msg","LoginForm","LOGIN_STATUS","fetchSession","fetchLogin","fetchLogout","fetchActiveUsers","socket","connect","App","username","setUsername","room","setRoom","showChat","setShowChat","loginStatus","setLoginStatus","NOT_LOGGED_IN","activeUsers","setActiveUsers","error","setError","data","name","userId","id","emit","joinRoom","getActiveUsers","onLogin","console","log","then","fetchedTodos","IS_LOGGED_IN","catch","err","onLogout","userData","event","target","value"],"sources":["/Users/harshavardhani/Documents/web_dev_tools/student-bos6250-harshaV0211/final/client/src/App.jsx"],"sourcesContent":["import \"./App.css\";\nimport io from \"socket.io-client\";\nimport { useState } from \"react\";\nimport Chat from \"./Chat\";\nimport msg from './icons/ChatApp.jpg';\n\nimport LoginForm from \"./LoginForm\";\n\nimport {\n  LOGIN_STATUS\n} from './constants';\n\nimport {\n  fetchSession,\n  fetchLogin,\n  fetchLogout,\n  fetchActiveUsers\n} from './services';\n\n\nconst socket = io.connect(\"http://localhost:3001\");\n\n\nfunction App() {\n  \n  const [username, setUsername] = useState(\"\");\n  const [room, setRoom] = useState(\"\");\n  const [showChat, setShowChat] = useState(false);\n  const [ loginStatus, setLoginStatus ] = useState(LOGIN_STATUS.NOT_LOGGED_IN); // one variable covers multiple cases\n  const [ activeUsers, setActiveUsers ] = useState({});\n  const [ error, setError ] = useState('');\n\n\n  const data = {name: username, userId: socket.id};\n  socket.emit('setSocketId', data);\n\n  const joinRoom = () => {\n    if (username !== \"\" && room !== \"\") {\n      socket.emit(\"join_room\", room);\n      setShowChat(true);\n      getActiveUsers(room);\n    }\n  };\n\n  function onLogin( username ) {\n    console.log(\"*** Clicked on login for username : \", username);\n    fetchLogin(username)\n    .then( fetchedTodos => {\n      console.log(\"fetched TOds : \", fetchedTodos)\n      setError(''); // in case another action had set an error\n      setUsername(username);\n      setLoginStatus(LOGIN_STATUS.IS_LOGGED_IN);\n    })\n    .catch( err => {\n      setError(err?.error || 'ERROR');\n    });\n  }\n\n  function onLogout() {\n    setError('');\n    setUsername('');\n    setLoginStatus(LOGIN_STATUS.NOT_LOGGED_IN);\n    fetchLogout() // We don't really care about results\n    .catch( err => {\n      setError(err?.error || 'ERROR'); // Ensure that the error ends up truthy\n    });\n  }\n\n  function getActiveUsers(room){\n    console.log(\"*** Inside get Active Users : \");\n    fetchActiveUsers(room)\n    .then( userData => {\n      console.log(\"Data from fetchActive Users  : \", userData);\n      setActiveUsers(userData)\n    })\n  }\n\n  console.log(\"Login status : \", loginStatus);\n  return (\n    <div className=\"App\">\n      { loginStatus === LOGIN_STATUS.NOT_LOGGED_IN && <LoginForm onLogin={onLogin}/>  }\n      { loginStatus === LOGIN_STATUS.IS_LOGGED_IN  && (\n        <div>\n            {!showChat ? (\n            <div className=\"joinChatContainer\">\n               <img className=\"Chatlogo\" src ={msg} alt = \" msg \" height={200} width={200}/>\n              <input\n                className=\"btn-submit\"\n                type=\"text\"\n                placeholder=\"Enter your nickname...\"\n                onChange={(event) => {\n                  setUsername(event.target.value);\n                }}\n              />\n              <input\n                className=\"btn-submit\"\n                type=\"text\"\n                placeholder=\"#channels\"\n                onChange={(event) => {\n                  setRoom(event.target.value);\n                }}\n              />\n              <button className=\"btn-login\"  onClick={joinRoom}>Join Channel</button>\n            </div>\n          ) : (\n            <Chat socket={socket} username={username} room={room} onLogout={onLogout} activeUsers={activeUsers} />\n          )}\n        </div>\n      )}\n    </div>\n  );\n}\n\nexport default App;"],"mappings":"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"},"metadata":{},"sourceType":"module"}