{"ast":null,"code":"import _slicedToArray from\"/Users/harshavardhani/Documents/web_dev_tools/student-bos6250-harshaV0211/final/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import\"./App.css\";import io from\"socket.io-client\";import{useState}from\"react\";import Chat from\"./Chat\";import msg from'./icons/ChatApp.jpg';import LoginForm from\"./LoginForm\";import{LOGIN_STATUS}from'./constants';import{fetchSession,fetchLogin,fetchLogout,fetchActiveUsers}from'./services';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var socket=io.connect(\"http://localhost:3001\");function App(){var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),username=_useState2[0],setUsername=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),room=_useState4[0],setRoom=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),showChat=_useState6[0],setShowChat=_useState6[1];var _useState7=useState(LOGIN_STATUS.NOT_LOGGED_IN),_useState8=_slicedToArray(_useState7,2),loginStatus=_useState8[0],setLoginStatus=_useState8[1];// one variable covers multiple cases\nvar _useState9=useState({}),_useState10=_slicedToArray(_useState9,2),activeUsers=_useState10[0],setActiveUsers=_useState10[1];var _useState11=useState(''),_useState12=_slicedToArray(_useState11,2),error=_useState12[0],setError=_useState12[1];var data={name:username,userId:socket.id};socket.emit('setSocketId',data);var joinRoom=function joinRoom(){if(username!==\"\"&&room!==\"\"){socket.emit(\"join_room\",room);setShowChat(true);getActiveUsers(room);}};function onLogin(username){console.log(\"*** Clicked on login for username : \",username);fetchLogin(username).then(function(fetchedTodos){console.log(\"fetched TOds : \",fetchedTodos);setError('');// in case another action had set an error\nsetUsername(username);setLoginStatus(LOGIN_STATUS.IS_LOGGED_IN);}).catch(function(err){setError((err===null||err===void 0?void 0:err.error)||'ERROR');});}function onLogout(){setError('');setUsername('');setLoginStatus(LOGIN_STATUS.NOT_LOGGED_IN);fetchLogout()// We don't really care about results\n.catch(function(err){setError((err===null||err===void 0?void 0:err.error)||'ERROR');// Ensure that the error ends up truthy\n});}function getActiveUsers(room){console.log(\"*** Inside get Active Users : \");fetchActiveUsers(room).then(function(userData){console.log(\"Data from fetchActive Users  : \",userData);setActiveUsers(userData);});}console.log(\"Login status : \",loginStatus);return/*#__PURE__*/_jsxs(\"div\",{className:\"App\",children:[loginStatus===LOGIN_STATUS.NOT_LOGGED_IN&&/*#__PURE__*/_jsx(LoginForm,{onLogin:onLogin}),loginStatus===LOGIN_STATUS.IS_LOGGED_IN&&/*#__PURE__*/_jsx(\"div\",{children:!showChat?/*#__PURE__*/_jsxs(\"div\",{className:\"joinChatContainer\",children:[/*#__PURE__*/_jsx(\"img\",{className:\"Chatlogo\",src:msg,alt:\" msg \",height:200,width:200}),/*#__PURE__*/_jsx(\"input\",{className:\"btn-submit\",type:\"text\",placeholder:\"Enter your nickname...\",onChange:function onChange(event){setUsername(event.target.value);}}),/*#__PURE__*/_jsx(\"input\",{className:\"btn-submit\",type:\"text\",placeholder:\"#channels\",onChange:function onChange(event){setRoom(event.target.value);}}),/*#__PURE__*/_jsx(\"button\",{className:\"btn-login\",onClick:joinRoom,children:\"Join Channel\"})]}):/*#__PURE__*/_jsx(Chat,{socket:socket,username:username,room:room,onLogout:onLogout,activeUsers:activeUsers})})]});}export default App;","map":{"version":3,"names":["io","useState","Chat","msg","LoginForm","LOGIN_STATUS","fetchSession","fetchLogin","fetchLogout","fetchActiveUsers","socket","connect","App","username","setUsername","room","setRoom","showChat","setShowChat","NOT_LOGGED_IN","loginStatus","setLoginStatus","activeUsers","setActiveUsers","error","setError","data","name","userId","id","emit","joinRoom","getActiveUsers","onLogin","console","log","then","fetchedTodos","IS_LOGGED_IN","catch","err","onLogout","userData","event","target","value"],"sources":["/Users/harshavardhani/Documents/web_dev_tools/student-bos6250-harshaV0211/final/client/src/App.jsx"],"sourcesContent":["import \"./App.css\";\nimport io from \"socket.io-client\";\nimport { useState } from \"react\";\nimport Chat from \"./Chat\";\nimport msg from './icons/ChatApp.jpg';\n\nimport LoginForm from \"./LoginForm\";\n\nimport {\n  LOGIN_STATUS\n} from './constants';\n\nimport {\n  fetchSession,\n  fetchLogin,\n  fetchLogout,\n  fetchActiveUsers\n} from './services';\n\n\nconst socket = io.connect(\"http://localhost:3001\");\n\n\nfunction App() {\n  \n  const [username, setUsername] = useState(\"\");\n  const [room, setRoom] = useState(\"\");\n  const [showChat, setShowChat] = useState(false);\n  const [ loginStatus, setLoginStatus ] = useState(LOGIN_STATUS.NOT_LOGGED_IN); // one variable covers multiple cases\n  const [ activeUsers, setActiveUsers ] = useState({});\n  const [ error, setError ] = useState('');\n\n\n  const data = {name: username, userId: socket.id};\n  socket.emit('setSocketId', data);\n\n  const joinRoom = () => {\n    if (username !== \"\" && room !== \"\") {\n      socket.emit(\"join_room\", room);\n      setShowChat(true);\n      getActiveUsers(room);\n    }\n  };\n\n  function onLogin( username ) {\n    console.log(\"*** Clicked on login for username : \", username);\n    fetchLogin(username)\n    .then( fetchedTodos => {\n      console.log(\"fetched TOds : \", fetchedTodos)\n      setError(''); // in case another action had set an error\n      setUsername(username);\n      setLoginStatus(LOGIN_STATUS.IS_LOGGED_IN);\n    })\n    .catch( err => {\n      setError(err?.error || 'ERROR');\n    });\n  }\n\n  function onLogout() {\n    setError('');\n    setUsername('');\n    setLoginStatus(LOGIN_STATUS.NOT_LOGGED_IN);\n    fetchLogout() // We don't really care about results\n    .catch( err => {\n      setError(err?.error || 'ERROR'); // Ensure that the error ends up truthy\n    });\n  }\n\n  function getActiveUsers(room){\n    console.log(\"*** Inside get Active Users : \");\n    fetchActiveUsers(room)\n    .then( userData => {\n      console.log(\"Data from fetchActive Users  : \", userData);\n      setActiveUsers(userData)\n    })\n  }\n\n  console.log(\"Login status : \", loginStatus);\n  return (\n    <div className=\"App\">\n      { loginStatus === LOGIN_STATUS.NOT_LOGGED_IN && <LoginForm onLogin={onLogin}/>  }\n      { loginStatus === LOGIN_STATUS.IS_LOGGED_IN  && (\n        <div >\n            {!showChat ? (\n            <div className=\"joinChatContainer\">\n               <img className=\"Chatlogo\" src ={msg} alt = \" msg \" height={200} width={200}/>\n              <input\n                className=\"btn-submit\"\n                type=\"text\"\n                placeholder=\"Enter your nickname...\"\n                onChange={(event) => {\n                  setUsername(event.target.value);\n                }}\n              />\n              <input\n                className=\"btn-submit\"\n                type=\"text\"\n                placeholder=\"#channels\"\n                onChange={(event) => {\n                  setRoom(event.target.value);\n                }}\n              />\n              <button className=\"btn-login\"  onClick={joinRoom}>Join Channel</button>\n            </div>\n          ) : (\n            <Chat socket={socket} username={username} room={room} onLogout={onLogout} activeUsers={activeUsers} />\n          )}\n        </div>\n      )}\n    </div>\n  );\n}\n\nexport default App;"],"mappings":"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"},"metadata":{},"sourceType":"module"}